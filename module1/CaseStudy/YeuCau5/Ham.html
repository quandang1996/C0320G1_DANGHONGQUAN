<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ứng Dụng Quản Lý Khu nghỉ dưỡng Furama</title>
</head>
<body>
<script>
    let k=true;
    function displayMainMenu () {
        while (k) {
            let selection = parseInt(prompt("1.Add New Customer. \n" +
                "2.Display Information Customer.\n" +
                "3.Edit Information Customer.\n" +
                "4.Delete Customer.\n" +
                "5.Exit.\n"));
            switch (selection) {
                case 1:
                    addNewCustomer();
                    break;
                case 2:
                    displayCustomers();
                    break;
                case 3:
                    editCustomer();
                    break;
                case 4:
                    deleteCustomer();
                    break;
                case 5:
                    k= false;
                    break;

            }
        }
    }
    let arrNameCustomer=[];
    let arrListCustomers =[];
    let count=0;
    function addNewCustomer() {
        let arrCustomer = [];
            let name=prompt("Họ và Tên");
            let idNumber;
        name = name.trim();
        while (1){
            name=name.replace("  "," ");
            if(name.search("  ")===-1){
                break;

            }
        }

        let name2="";
        for (let i=0;i<name.length;i++){
            if(i===0){
                name2+=name[i].toUpperCase();
            }else if(name[i-1]===" "&&name[i] !==" "){
                name2+=name[i].toUpperCase();
            }else {
                name2+=name[i].toLowerCase();
            }
        }
            while(1){
                idNumber =prompt("Số CMND");
                if(idNumber.length === 9){
                    if(Number.isInteger(parseInt(idNumber))&& parseInt(idNumber)>0){

                        break;
                    }
                }
            }
            let day,month,year;
            let dateOfBirth;
            while (1){
                dateOfBirth = prompt("Ngày tháng năm sinh");
                if(dateOfBirth[2]==="/" && dateOfBirth[5]==="/"&& dateOfBirth.length===10){
                    day=dateOfBirth.substr(0,2);
                    month= dateOfBirth.substr(3,2);
                    year =dateOfBirth.substr(6,4);
                    if(Number.isInteger(parseInt(day))&& parseInt(day)>0 && parseInt(day)<=31&&
                        Number.isInteger(parseInt(month))&& parseInt(month)>0 && parseInt(month)<=12&&
                        Number.isInteger(parseInt(year))&& parseInt(year)>0){
                        break;
                    }
                }
            }
            let pattern = /^\w+@\w+\.+(\w){1,4}$/i;
            let email;
            while (1) {
                email = prompt("Email");
                if (pattern.test(email)) {
                    break;
                }
            }
            let address = prompt("Địa Chỉ");
            let customer = prompt("Loại Customer (Diamond, Platinum, Gold, Silver, Member)");
            let discount = prompt("Giảm giá");
            let quantity,rentDay;
            do{
                quantity = parseInt(prompt("Số lượng đi kèm"));
            }while (isNaN(quantity));

            do{
                rentDay = parseInt(prompt("Số ngày thuê"));
            }while (isNaN(rentDay));

            let service = prompt("Loại dịch vụ (Villa, House, Room)");
            let room = prompt("Loại phòng thuê (Vip, Business,  Normal)");
        arrCustomer.push(name2);
        arrCustomer.push(idNumber);
        arrCustomer.push(dateOfBirth);
        arrCustomer.push(address);
        arrCustomer.push(customer);
        arrCustomer.push(discount);
        arrCustomer.push(quantity);
        arrCustomer.push(rentDay);
        arrCustomer.push(service);
        arrCustomer.push(room);
        arrListCustomers.push(arrCustomer);
        arrNameCustomer.push(arrCustomer[0]);

        }
        function displayCustomers(){

            let selectName = prompt("Danh sách khách hàng"+"\n"+arrNameCustomer.join("\n") + "\n"
                + "Nhập tên khách hàng bạn muốn xem thông tin");
            for (let j = 0; j < arrNameCustomer.length; j++) {
                if (selectName === arrNameCustomer[j]) {
                    alert("1.Ho va ten: " + arrListCustomers[j][0] + "\n" +
                        "2.So CMND: " + arrListCustomers[j][1] + "\n" +
                        "3.Ngay Sinh: " + arrListCustomers[j][2] + "\n" +
                        "4.Email: " + arrListCustomers[j][3] + "\n" +
                        "5.Dia chi: " + arrListCustomers[j][4] + "\n" +
                        "6.Loai khach hang: " + arrListCustomers[j][5] + "\n" +
                        "7.Giam gia: " + arrListCustomers[j][6] + "\n" +
                        "8.So luong di kem: " + arrListCustomers[j][7] + "\n" +
                        "9.So ngay thue: " + arrListCustomers[j][8] + "\n" +
                        "10.Loai dich vu: " + arrListCustomers[j][9] + "\n" +
                        "11.Loai phong: " + arrListCustomers[j][10] + "\n");
                    break;
                }
            }
        }
        function editCustomer() {
            let nameCustomers = prompt("Danh sách khách hàng" + "\n" + arrNameCustomer.join("\n") + "\n"
                + "Nhập tên khách hàng bạn muốn sửa thông tin");
            for (let j = 0; j < arrNameCustomer.length; j++) {
                if (nameCustomers === arrNameCustomer[j]) {
                    let list = parseInt(prompt("1.Ho va ten: " + arrListCustomers[j][0] + "\n" +
                        "2.So CMND: " + arrListCustomers[j][1] + "\n" +
                        "3.Ngay Sinh: " + arrListCustomers[j][2] + "\n" +
                        "4.Email: " + arrListCustomers[j][3] + "\n" +
                        "5.Dia chi: " + arrListCustomers[j][4] + "\n" +
                        "6.Loai khach hang: " + arrListCustomers[j][5] + "\n" +
                        "7.Giam gia: " + arrListCustomers[j][6] + "\n" +
                        "8.So luong di kem: " + arrListCustomers[j][7] + "\n" +
                        "9.So ngay thue: " + arrListCustomers[j][8] + "\n" +
                        "10.Loai dich vu: " + arrListCustomers[j][9] + "\n" +
                        "11.Loai phong: " + arrListCustomers[j][10] + "\n"));
                    switch (list) {
                        case 1:
                            arrListCustomers[j][0] = prompt("Họ và Tên");
                            arrNameCustomer[j]=arrListCustomers[j][0];
                            break;
                        case 2:
                            arrListCustomers[j][1] = prompt("Số CMND");
                            break;
                        case 3:
                            arrListCustomers[j][2] = prompt("Ngày tháng năm sinh");
                            break;
                        case 4:
                            arrListCustomers[j][3] = prompt("Email");
                            break;
                        case 5:
                            arrListCustomers[j][4] = prompt("Địa Chỉ");
                            break;
                        case 6:
                            arrListCustomers[j][5] = prompt("Loại Customer (Diamond, Platinum, Gold, Silver, Member)");
                            break;
                        case 7:
                            arrListCustomers[j][6] = prompt("Giảm giá");
                            break;
                        case 8:
                            arrListCustomers[j][7] = prompt("Số lượng đi kèm");
                            break;
                        case 9:
                            arrListCustomers[j][8] = prompt("Số ngày thuê");
                            break;
                        case 10:
                            arrListCustomers[j][9] = prompt("Loại dịch vụ (Villa, House, Room)");
                            break;
                        case 11:
                            arrListCustomers[j][10] = prompt("Loại phòng thuê (Vip, Business,  Normal)");
                            break;
                        default:
                            alert("Failed");

                            alert("1.Ho va ten: " + arrListCustomers[j][0] + "\n" +
                                "2.So CMND: " + arrListCustomers[j][1] + "\n" +
                                "3.Ngay Sinh: " + arrListCustomers[j][2] + "\n" +
                                "4.Email: " + arrListCustomers[j][3] + "\n" +
                                "5.Dia chi: " + arrListCustomers[j][4] + "\n" +
                                "6.Loai khach hang: " + arrListCustomers[j][5] + "\n" +
                                "7.Giam gia: " + arrListCustomers[j][6] + "\n" +
                                "8.So luong di kem: " + arrListCustomers[j][7] + "\n" +
                                "9.So ngay thue: " + arrListCustomers[j][8] + "\n" +
                                "10.Loai dich vu: " + arrListCustomers[j][9] + "\n" +
                                "11.Loai phong: " + arrListCustomers[j][10] + "\n");
                    }
                    break;
                }
            }
        }
    function deleteCustomer() {
        let nameDelete = prompt("Danh sách khách hàng" + "\n" + arrNameCustomer.join("\n") + "\n"
            + "Nhập tên khách hàng bạn muốn  xóa");
        for (let j = 0; j < arrNameCustomer.length; j++) {
            if (nameDelete === arrNameCustomer[j]) {
                arrListCustomers.splice(j,1);
                alert(arrNameCustomer.splice(j,1));
            }
            }

}
    displayMainMenu();
</script>
</body>
</html>